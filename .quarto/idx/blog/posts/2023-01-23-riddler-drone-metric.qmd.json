{"title":"Riddler: As the drone flies --- Can you make a speedy delivery?","markdown":{"yaml":{"title":"Riddler: As the drone flies --- Can you make a speedy delivery?","date":"2023-01-23","description":"Calculating expected distances under different city travel metrics.","author":"Mark Girard","categories":["geometry","riddler"],"format":"html"},"headingText":"The Problem","containsRefs":false,"markdown":"\n\n\nMy solution to [this week's riddler](https://fivethirtyeight.com/features/can-you-make-a-speedy-delivery/). (See more of [my Riddler solutions here](/riddlers).)\n\nFrom Graydon Snider comes a dilemma of delivery:\n\n>A restaurant at the center of Riddler City is testing an airborne drone delivery service against their existing fleet of scooters. The restaurant is at the center of a large [Manhattan-like](https://mathworld.wolfram.com/TaxicabMetric.html) array of square city blocks, which the scooter must follow.\n>\n>Both vehicles travel at the same speed, which means drones can make more deliveries per unit time. Assume that (1) Riddler City is circular in shape, [as you may recall](https://fivethirtyeight.com/features/can-you-solve-this-rather-pedestrian-puzzle/) (2) deliveries are made to random locations throughout the city and (3) the city is much, much larger than its individual blocks.\n>\nIn a given amount of time, what is the expected ratio between the number of deliveries a drone can make to the number of deliveries a scooter can make?\n>\n>_Extra credit:_ In addition to traveling parallel to the city blocks, suppose scooters can also move diagonally from one corner of a block to the opposite corner of the block. Now, what is the new expected ratio between the number of deliveries a drone can make and the number of deliveries a scooter can make?\n\n### Solution\n\nLet the radius of Riddler City be equal to 1, so that the extent of the city is simply the unit disc. As indicated in the (non-extra-credit) problem statement, the scooter travels according to the [taxicab metric](https://mathworld.wolfram.com/TaxicabMetric.html) (also known as the *Manhattan* distance). To solve this problem, we need to compute the expected distance that the drone and scooter will travel given a randomly chosen point in the City.\n\nThe amount of time a delivery takes is proportional to its distance,   and the expected number of deliveries that can be made in a given amount of time is proportional to the *inverse* of the average time. So the ratio of the expected numbers of deliveries is equal to the inverse of the ratio of the expected distances.\n\n#### As the drone flies\nWe first consider the drone, which always takes the most direct route by flying in a straight line. Using polar coordinates $r\\in[0,1]$ and $\\theta\\in[0,2\\pi)$ to parameterize the disc, the distance to a point from the origin is just the radial distance $r$. The desired expected value is simply the average of $r$ over the disc divided by the total area (which is equal to π). The area element for this integral is $\\operatorname{d} \\mspace{-1mu}A=r\\,\\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta$, so to compute the expected distance that the drone travels, we have\n\n$$\n\\begin{align*}\nE_{\\text{drone}}\n&= \\frac{1}{\\pi}\\int_{\\text{City}}r\\, \\operatorname{d} \\mspace{-1mu}A\\\\\n&= \\frac{1}{\\pi}\\int_0^{2\\pi}\\int_0^1r^2\\, \\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n&= \\frac{1}{\\pi}(2\\pi)\\frac{1}{3}\\\\\n& = \\frac{2}{3},\n\\end{align*}\n$$\n\nso the average distance as the drone flies is equal to $2/3$.\n\n#### Cardinal scooter\nNow let's figure out what the expected distance the scooter has to  travel given a randomly chosen point in the City. Given a point $(x,y)$ in the disc, the distance (as the scooter drives) from the center to that point is given by\n\n$$\n\\Vert(x,y)\\Vert_{\\text{scooter}} = \\vert x\\vert + \\vert y\\vert.\n$$\n\nParameterizing the disc in polar coordinates to that $x=r\\cos\\theta$ and $y=r\\sin\\theta$, and this expression becomes $r(\\vert \\sin\\theta\\vert  + \\vert \\cos\\theta\\vert)$. To compute the expected distance in the taxicab metric, we can simplify the integral by integrating only over the quadrant where $\\cos\\theta$ and $\\sin\\theta$ are both positive and multiply the result by $4$. We have\n\n$$\n\\begin{align*}\nE_{\\text{scooter}}\n&= \\frac{1}{\\pi}\\int_{\\text{City}}r\\big(\\vert \\sin\\theta\\vert  + \\vert \\cos\\theta\\vert \\big)\\, \\operatorname{d}\\mspace{-1mu}A\\\\\n&= \\frac{4}{\\pi}\\int_0^{\\pi/2}\\int_0^1r^2(\\sin\\theta + \\cos\\theta)\\, \\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n&= \\frac{4}{\\pi}\\Big(\\int_0^{\\pi/2}(\\sin\\theta + \\cos\\theta)\\,\\operatorname{d} \\mspace{-1mu}\\theta\\Big)\\frac{1}{3}\\\\\n& = \\frac{8}{3\\pi}.\n\\end{align*}\n$$\n\nNote that\n\n$$\n\\frac{E_\\text{drone}}{E_{\\text{scooter}}} = \\frac{4}{\\pi} \\approx 1.27,\n$$\n\nso the scooter needs to travel on average about 27% further to make the same delivery!\n\nIn the long run, the ratio of the number of deliveries that a drone can make in the same time as the scooter is equal to the same ratio, $4/\\pi$. That is, the drone makes on average roughly 27% more deliveries.\n\n\n#### Extra credit: diagonal scooter\n\nAllowing the scooter to *also* travel along the diagonals gives rise to a new metric that we must now consider. Given a point $(x,y)$ in the City, the distance from this point to the center is the *shortest path* that the scooter can take to get there by traveling only along diagonals and orthogonal cross streets. How might we compute this metric? Let's denote this metric as\n\n$$\n\\Vert(x,y)\\Vert_{\\text{scooter*}}\n$$\n\nwhere we use $\\text{scooter*}$ to indicate the augmented scooter.\n\nTo examine the most efficient routes for the scooters, first note that, if the scooter can't get to its destination by traveling in a single cardinal direction (i.e., needing only to go straight N, S, E, or W), traveling along a diagonal is much more efficient than traveling along two different cardinal directions.\n\nFor example, if a route involved some amount of travel on a street headed due north followed by a stretch of the same distance but headed due west, we could instead have arrived there in a more efficient manner by traveling northwest along the NW diagonal. This would get us to the same place but require a total travel distance equal to a fraction of $1/\\sqrt{2}$ of the distance taken by only going north then west.\n\nThus, the most efficient routes for the scooter will always be to first take a diagonal as far as possible, until you are at a point where you can then travel a straight line in a single cardinal direction (N, S, E, or W) until you reach your destination.\n\nFor points in the first eighth slice of the City, we have the following diagram to help us find the shortest path.\n\n![Diagonally augmented scooter distance](/blog/images/riddler_2023_drone_metric.png)\n\nThat is, the shortest path to the point $(x,y)$ is to travel NW along the diagonal until you are as far north as the destination, then travel due west until you arrive.\n\nIn this slice of the disc (i.e., all the points $(x,y)$ such that $0\\leq y\\leq x$ and $x^2+y^2\\leq 1$), the augmented scooter distance evaluates to\n\n$$\n\\begin{align*}\n\\Vert(x,y)\\Vert_\\text{scooter*} &= \\sqrt{2}y + (x-y)\\\\\n& = x + \\big(\\sqrt{2}-1\\big)y\n\\end{align*}\n$$\n\nIn polar coordinates, this expression becomes\n\n$$\nr\\big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\big).\n$$\n\nBy symmetry, the expected distance will be the same for all eight slices, so we can integrate over just this slice and divide by its area ($\\pi/8$) to get the expected distance over the whole City. Thus, we have\n\n$$\n\\begin{align*}\nE_{\\text{scooter*}} & = \\frac{8}{\\pi}\\int_0^{\\pi/4}\\int_0^1 r\\Big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\Big)r\\,\\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\n\\\\\n& = \\frac{8}{\\pi}\\int_0^1 r^2\\, \\operatorname{d} \\mspace{-1mu}r \\int_0^{\\pi/4}\\big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\big)\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n& = \\frac{8}{3\\pi}\\Bigg(\\frac{1}{\\sqrt{2}} + \\big(\\sqrt{2}-1\\big)\\left(1-\\frac{1}{\\sqrt{2}}\\right)\\Bigg)\\\\\n&=\\frac{8}{3\\pi}\\left(\\frac{1}{\\sqrt{2}}+\\left(\\frac{3}{\\sqrt{2}}-2\\right)\\right)\\\\\n&= \\frac{8}{3\\pi}2\\left(\\sqrt{2}-1\\right).\n\\end{align*}\n$$\n\nHence, the average distance that the diagonal scooter travels is on average $2(\\sqrt{2}-1)\\approx0.828$ times the distance that the regular scooter travels.\n\nIn relation to the drone, the ratio of the expected number of deliveries that the drone can make vs the scooter is equal to\n\n$$\n\\frac{E_{\\text{scooter*}}}{E_{\\text{drone}}} = \\frac{8\\big(\\sqrt{2}-1\\big)}{\\pi}\\approx1.055,\n$$\n\nso the drone only makes about 5.5% more deliveries than the diagonal scooter.","srcMarkdownNoYaml":"\n\n\nMy solution to [this week's riddler](https://fivethirtyeight.com/features/can-you-make-a-speedy-delivery/). (See more of [my Riddler solutions here](/riddlers).)\n\n## The Problem\nFrom Graydon Snider comes a dilemma of delivery:\n\n>A restaurant at the center of Riddler City is testing an airborne drone delivery service against their existing fleet of scooters. The restaurant is at the center of a large [Manhattan-like](https://mathworld.wolfram.com/TaxicabMetric.html) array of square city blocks, which the scooter must follow.\n>\n>Both vehicles travel at the same speed, which means drones can make more deliveries per unit time. Assume that (1) Riddler City is circular in shape, [as you may recall](https://fivethirtyeight.com/features/can-you-solve-this-rather-pedestrian-puzzle/) (2) deliveries are made to random locations throughout the city and (3) the city is much, much larger than its individual blocks.\n>\nIn a given amount of time, what is the expected ratio between the number of deliveries a drone can make to the number of deliveries a scooter can make?\n>\n>_Extra credit:_ In addition to traveling parallel to the city blocks, suppose scooters can also move diagonally from one corner of a block to the opposite corner of the block. Now, what is the new expected ratio between the number of deliveries a drone can make and the number of deliveries a scooter can make?\n\n### Solution\n\nLet the radius of Riddler City be equal to 1, so that the extent of the city is simply the unit disc. As indicated in the (non-extra-credit) problem statement, the scooter travels according to the [taxicab metric](https://mathworld.wolfram.com/TaxicabMetric.html) (also known as the *Manhattan* distance). To solve this problem, we need to compute the expected distance that the drone and scooter will travel given a randomly chosen point in the City.\n\nThe amount of time a delivery takes is proportional to its distance,   and the expected number of deliveries that can be made in a given amount of time is proportional to the *inverse* of the average time. So the ratio of the expected numbers of deliveries is equal to the inverse of the ratio of the expected distances.\n\n#### As the drone flies\nWe first consider the drone, which always takes the most direct route by flying in a straight line. Using polar coordinates $r\\in[0,1]$ and $\\theta\\in[0,2\\pi)$ to parameterize the disc, the distance to a point from the origin is just the radial distance $r$. The desired expected value is simply the average of $r$ over the disc divided by the total area (which is equal to π). The area element for this integral is $\\operatorname{d} \\mspace{-1mu}A=r\\,\\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta$, so to compute the expected distance that the drone travels, we have\n\n$$\n\\begin{align*}\nE_{\\text{drone}}\n&= \\frac{1}{\\pi}\\int_{\\text{City}}r\\, \\operatorname{d} \\mspace{-1mu}A\\\\\n&= \\frac{1}{\\pi}\\int_0^{2\\pi}\\int_0^1r^2\\, \\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n&= \\frac{1}{\\pi}(2\\pi)\\frac{1}{3}\\\\\n& = \\frac{2}{3},\n\\end{align*}\n$$\n\nso the average distance as the drone flies is equal to $2/3$.\n\n#### Cardinal scooter\nNow let's figure out what the expected distance the scooter has to  travel given a randomly chosen point in the City. Given a point $(x,y)$ in the disc, the distance (as the scooter drives) from the center to that point is given by\n\n$$\n\\Vert(x,y)\\Vert_{\\text{scooter}} = \\vert x\\vert + \\vert y\\vert.\n$$\n\nParameterizing the disc in polar coordinates to that $x=r\\cos\\theta$ and $y=r\\sin\\theta$, and this expression becomes $r(\\vert \\sin\\theta\\vert  + \\vert \\cos\\theta\\vert)$. To compute the expected distance in the taxicab metric, we can simplify the integral by integrating only over the quadrant where $\\cos\\theta$ and $\\sin\\theta$ are both positive and multiply the result by $4$. We have\n\n$$\n\\begin{align*}\nE_{\\text{scooter}}\n&= \\frac{1}{\\pi}\\int_{\\text{City}}r\\big(\\vert \\sin\\theta\\vert  + \\vert \\cos\\theta\\vert \\big)\\, \\operatorname{d}\\mspace{-1mu}A\\\\\n&= \\frac{4}{\\pi}\\int_0^{\\pi/2}\\int_0^1r^2(\\sin\\theta + \\cos\\theta)\\, \\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n&= \\frac{4}{\\pi}\\Big(\\int_0^{\\pi/2}(\\sin\\theta + \\cos\\theta)\\,\\operatorname{d} \\mspace{-1mu}\\theta\\Big)\\frac{1}{3}\\\\\n& = \\frac{8}{3\\pi}.\n\\end{align*}\n$$\n\nNote that\n\n$$\n\\frac{E_\\text{drone}}{E_{\\text{scooter}}} = \\frac{4}{\\pi} \\approx 1.27,\n$$\n\nso the scooter needs to travel on average about 27% further to make the same delivery!\n\nIn the long run, the ratio of the number of deliveries that a drone can make in the same time as the scooter is equal to the same ratio, $4/\\pi$. That is, the drone makes on average roughly 27% more deliveries.\n\n\n#### Extra credit: diagonal scooter\n\nAllowing the scooter to *also* travel along the diagonals gives rise to a new metric that we must now consider. Given a point $(x,y)$ in the City, the distance from this point to the center is the *shortest path* that the scooter can take to get there by traveling only along diagonals and orthogonal cross streets. How might we compute this metric? Let's denote this metric as\n\n$$\n\\Vert(x,y)\\Vert_{\\text{scooter*}}\n$$\n\nwhere we use $\\text{scooter*}$ to indicate the augmented scooter.\n\nTo examine the most efficient routes for the scooters, first note that, if the scooter can't get to its destination by traveling in a single cardinal direction (i.e., needing only to go straight N, S, E, or W), traveling along a diagonal is much more efficient than traveling along two different cardinal directions.\n\nFor example, if a route involved some amount of travel on a street headed due north followed by a stretch of the same distance but headed due west, we could instead have arrived there in a more efficient manner by traveling northwest along the NW diagonal. This would get us to the same place but require a total travel distance equal to a fraction of $1/\\sqrt{2}$ of the distance taken by only going north then west.\n\nThus, the most efficient routes for the scooter will always be to first take a diagonal as far as possible, until you are at a point where you can then travel a straight line in a single cardinal direction (N, S, E, or W) until you reach your destination.\n\nFor points in the first eighth slice of the City, we have the following diagram to help us find the shortest path.\n\n![Diagonally augmented scooter distance](/blog/images/riddler_2023_drone_metric.png)\n\nThat is, the shortest path to the point $(x,y)$ is to travel NW along the diagonal until you are as far north as the destination, then travel due west until you arrive.\n\nIn this slice of the disc (i.e., all the points $(x,y)$ such that $0\\leq y\\leq x$ and $x^2+y^2\\leq 1$), the augmented scooter distance evaluates to\n\n$$\n\\begin{align*}\n\\Vert(x,y)\\Vert_\\text{scooter*} &= \\sqrt{2}y + (x-y)\\\\\n& = x + \\big(\\sqrt{2}-1\\big)y\n\\end{align*}\n$$\n\nIn polar coordinates, this expression becomes\n\n$$\nr\\big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\big).\n$$\n\nBy symmetry, the expected distance will be the same for all eight slices, so we can integrate over just this slice and divide by its area ($\\pi/8$) to get the expected distance over the whole City. Thus, we have\n\n$$\n\\begin{align*}\nE_{\\text{scooter*}} & = \\frac{8}{\\pi}\\int_0^{\\pi/4}\\int_0^1 r\\Big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\Big)r\\,\\operatorname{d} \\mspace{-1mu}r\\,\\operatorname{d} \\mspace{-1mu}\\theta\n\\\\\n& = \\frac{8}{\\pi}\\int_0^1 r^2\\, \\operatorname{d} \\mspace{-1mu}r \\int_0^{\\pi/4}\\big(\\cos\\theta + \\big(\\sqrt{2}-1\\big)\\sin\\theta\\big)\\,\\operatorname{d} \\mspace{-1mu}\\theta\\\\\n& = \\frac{8}{3\\pi}\\Bigg(\\frac{1}{\\sqrt{2}} + \\big(\\sqrt{2}-1\\big)\\left(1-\\frac{1}{\\sqrt{2}}\\right)\\Bigg)\\\\\n&=\\frac{8}{3\\pi}\\left(\\frac{1}{\\sqrt{2}}+\\left(\\frac{3}{\\sqrt{2}}-2\\right)\\right)\\\\\n&= \\frac{8}{3\\pi}2\\left(\\sqrt{2}-1\\right).\n\\end{align*}\n$$\n\nHence, the average distance that the diagonal scooter travels is on average $2(\\sqrt{2}-1)\\approx0.828$ times the distance that the regular scooter travels.\n\nIn relation to the drone, the ratio of the expected number of deliveries that the drone can make vs the scooter is equal to\n\n$$\n\\frac{E_{\\text{scooter*}}}{E_{\\text{drone}}} = \\frac{8\\big(\\sqrt{2}-1\\big)}{\\pi}\\approx1.055,\n$$\n\nso the drone only makes about 5.5% more deliveries than the diagonal scooter."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"css":["../../styles.css"],"output-file":"2023-01-23-riddler-drone-metric.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"flatly","title":"Riddler: As the drone flies --- Can you make a speedy delivery?","date":"2023-01-23","description":"Calculating expected distances under different city travel metrics.","author":"Mark Girard","categories":["geometry","riddler"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}